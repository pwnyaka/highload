MySQL не способна использовать индексы, когда в производном результате используется WHERE.
После помещения этих условий внутри UNION становится возможным использование индексов.
Это значит, что добавления индексов не всегда достаточно.